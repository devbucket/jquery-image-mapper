/* jQuery Image Mapper - v1.0.0
 * Copyright (c) 2015 Florian Mueller
 * 2015-06-18
 */
!function(a){a.widget("ui.imageMapper",a.ui.mouse,{options:{collideOnDraw:!1,mapItemsListPercentage:!1,mapItemClass:"ui-map-item",drawHelperClass:"ui-image-mapper-helper"},_init:function(){this.element.addClass("ui-image-mapper").css({position:"absolute"}),this.mapItems=[],this.dragged=!0,this._mouseInit(),this.helper=a("<div/>").addClass("ui-image-mapper-helper"),this.container=a("<div/>").addClass("ui-image-mapper-maps").css({position:"absolute","z-index":2,top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}),a(this.element).append(this.container),a(this.element).find("img").css({position:"relative","z-index":1})},destroy:function(){this.element.removeClass("ui-image-mapper ui-image-mapper-disabled"),this._mouseDestroy()},_mouseStart:function(b){this.elPos=a(this.element).offset(),this.opos=[b.pageX-this.elPos.left,b.pageY-this.elPos.top],this.options.disabled||(this._trigger("start",b),a(this.element).append(this.helper),this.helper.css({"z-index":100,position:"absolute",left:this.opos[0],top:this.opos[1],width:0,height:0,border:"2px dotted black"}))},_mouseDrag:function(a){if(this.dragged=!0,!this.options.disabled){var b=this.opos[0],c=this.opos[1],d=a.pageX-this.elPos.left,e=a.pageY-this.elPos.top;if(b>d){var f=d;d=b,b=f}return this.helper.css({left:b,top:c,width:d-b,height:e-c}),this._trigger("drag",a),!1}},_createMapItem:function(b){var c=this.options.mapItemClass+"-"+(this.mapItems.length+1),d={id:c,left:this._parseValue(b.css("left")),top:this._parseValue(b.css("top")),width:this._parseValue(b.css("width")),height:this._parseValue(b.css("height"))};a(b).attr("id",c),this.mapItems.push(d)},_mouseStop:function(b){var c=this;this.dragged=!1;var d=this.helper.clone().appendTo(this.container);return a(d).draggable({stack:".ui-image-mapper-helper",containment:"parent",obstacle:this.options.drawHelperClass,preventCollision:!0,stop:function(b,d){var e=parseInt(a(d.helper.context).attr("data-id"),10)-1;c.mapItems[e].left=c._parseValue(d.position.left),c.mapItems[e].top=c._parseValue(d.position.top),c._trigger("updated",b,{items:c.mapItems})}}),a(d).resizable({containment:"parent",stop:function(b,d){var e=parseInt(a(d.helper.context).attr("data-id"),10)-1;c.mapItems[e].width=c._parseValue(d.size.width),c.mapItems[e].height=c._parseValue(d.size.height),c._trigger("updated",b,{items:c.mapItems})}}),a(d).attr("data-id",this.mapItems.length+1),this._createMapItem(d),this.helper.remove(),this._trigger("updated",b,{items:this.mapItems}),!1},_parseValue:function(a){return this.options.mapItemsListPercentage===!0?this._pixelToPercentageHorizontal(a):a.toString().replace("px","")+"px"},_pixelToPercentageHorizontal:function(b){var c=parseInt(b.toString().replace("px",""),10),d=parseInt(a(this.container).width().toString(),10),e=100/d*c;return e+"%"}}),a.extend(a.ui.imageMapper,{defaults:a.extend({},a.ui.mouse.defaults)})}(jQuery);
//# sourceMappingURL=jquery.image-mapper.min.js.map