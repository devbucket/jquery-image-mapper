/* jQuery Image Mapper v1.0.0 - https://github.com/devbucket/jquery-image-mapper
 * Draw image maps the old fashioned way just with HTML, jQuery and jQuery UI.
 * 
 * Copyright (c) 2015 Florian Mueller
 * Licensed under the GPL license
 * 2015-06-18
 */
!function(a){"use strict";a.fn.overlaps=function(b,c){var d={targets:[],hits:[]},e="undefined"==typeof c?1:c;return this.each(function(){var c=a(this).offset();c.right=c.left+a(this).outerWidth(),c.bottom=c.top+a(this).outerHeight();var f=a(b).offset();f.right=f.left+a(b).outerWidth(),f.bottom=f.top+a(b).outerHeight(),f.right+e<c.left||f.left+e>c.right||f.bottom+e<c.top||f.top+e>c.bottom||(d.targets.push(this),d.hits.push(b))}),d}}(jQuery),function(a){a.widget("ui.imageMapper",a.ui.mouse,{options:{handleCollision:!0,collisionTolerance:1,mapItemsListPercentage:!1,mapItemClass:"ui-map-item",drawHelperClass:"ui-image-mapper-helper",zIndex:100,revertDuration:100,borderDrawSize:"1px",borderDrawStyle:"dotted",borderDrawColor:"#000",borderDrawErrorSize:"1px",borderDrawErrorStyle:"dotted",borderDrawErrorColor:"#ff0000",borderSize:"1px",borderStyle:"solid",borderColor:"#69bce2",borderActiveSize:"1px",borderActiveStyle:"solid",borderActiveColor:"#00aeff",borderActiveErrorSize:"1px",borderActiveErrorStyle:"solid",borderActiveErrorColor:"#ff0000",backgroundDrawColor:"rgba(0,174,255,0)",backgroundDrawErrorColor:"rgba(255,0,0,0.1)",backgroundColor:"rgba(0,174,255,0.1)",backgroundActiveColor:"rgba(0,174,255,0.25)",backgroundActiveErrorColor:"rgba(255,0,0,0.35)"},_init:function(){this.mapItems=[],this.dragged=!0,this._mouseInit(),this.element.addClass("ui-image-mapper").css({position:"absolute"}),this.helper=a("<div/>").addClass("ui-image-mapper-helper").addClass("drag"),this.container=a("<div/>").addClass("ui-image-mapper-maps").css({position:"absolute","z-index":2,top:0,left:0,width:"100%",height:"100%",overflow:"hidden"}).appendTo(a(this.element)),a(this.element).find("img").css({position:"relative","z-index":1})},destroy:function(){this.element.removeClass("ui-image-mapper ui-image-mapper-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this.options;this.elPos=a(this.element).offset(),this.opos=[b.pageX-this.elPos.left,b.pageY-this.elPos.top],c.disabled||(this._trigger("start",b),this._setInactive(a("."+c.drawHelperClass+".active")),a(this.element).append(this.helper),this.helper.css({"z-index":c.zIndex+(this.mapItems.length+1),position:"absolute",left:this.opos[0],top:this.opos[1],width:0,height:0}),this._setDraw(this.helper))},_mouseDrag:function(a){if(this.dragged=!0,!this.options.disabled){var b=this.opos[0],c=this.opos[1],d=a.pageX-this.elPos.left,e=a.pageY-this.elPos.top;if(b>d){var f=d;d=b,b=f}return this.helper.css({left:b,top:c,width:d-b,height:e-c}),this._trigger("drag",a),this._colliding()?this._setDrawError(this.helper):this._setDraw(this.helper),!1}},_mouseStop:function(b){this.dragged=!1;var c=this,d=c.options;if(c._colliding())c._resetAll(c.helper);else{var e=c.helper.clone().appendTo(c.container);c._setActive(e),a(e).removeClass("drag").addClass("drop").draggable({zIndex:500,stack:d.drawHelperClass,containment:"parent",revertDuration:d.revertDuration,revert:function(){return c._colliding()?!0:void 0},drag:function(a,b){c._colliding()?c._setError(b.helper):c._setActive(b.helper)},start:function(b,e){a(e.helper).hasClass("active")||c._setInactive(a("."+d.drawHelperClass+".active")),a(e.helper).removeClass("drop").addClass("drag")},stop:function(b,d){if(!c._colliding()){c._resetError(d.helper),a(d.helper).removeClass("drag").addClass("drop");var e=parseInt(a(d.helper).attr("data-id"),10)-1;c.mapItems[e].left=c._parseValue(d.position.left),c.mapItems[e].top=c._parseValue(d.position.top),c._trigger("updated",b,{items:c.mapItems})}}}).resizable({containment:"parent",resize:function(a,b){c._colliding()?c._setError(b.helper):c._setActive(b.helper)},start:function(b,e){a(e.helper).hasClass("active")||c._setInactive(a("."+d.drawHelperClass+".active")),a(e.helper).removeClass("drop").addClass("drag")},stop:function(b,d){a(d.helper).removeClass("drag").addClass("drop");var e=parseInt(a(d.helper).attr("data-id"),10)-1;c.mapItems[e].width=c._parseValue(d.size.width),c.mapItems[e].height=c._parseValue(d.size.height),c._trigger("updated",b,{items:c.mapItems})}}).attr("data-id",this.mapItems.length+1).click(function(b){a(b.target).hasClass("active")||(c._setInactive(a("."+d.drawHelperClass+".active")),c._setActive(b.target))}),this._saveMapItem(e),this.helper.remove(),this._trigger("updated",b,{items:this.mapItems})}return!1},_resetAll:function(b){var c=this;a(b).animate({width:"0px",height:"0px","border-color":"rgba(0,0,0,0)"},c.options.revertDuration,function(){a(b).remove()})},_setActive:function(b){var c=this.options;a(b).css({"z-index":150,border:c.borderActiveSize+" "+c.borderActiveStyle+" "+c.borderActiveColor,"background-color":c.backgroundActiveColor}).addClass("active")},_setInactive:function(b){var c=this.options;a(b).css({border:c.borderSize+" "+c.borderStyle+" "+c.borderColor,"background-color":c.backgroundColor}).removeClass("active")},_setError:function(b){var c=this.options;a(b).css({border:c.borderActiveErrorSize+" "+c.borderActiveErrorStyle+" "+c.borderActiveErrorColor,"background-color":c.backgroundActiveErrorColor}).addClass("error")},_resetError:function(b){var c=this.options;a(b).css({"z-index":150,border:c.borderActiveSize+" "+c.borderActiveStyle+" "+c.borderActiveColor,"background-color":c.backgroundActiveColor}).removeClass("error")},_setDraw:function(b){var c=this.options;a(b).css({border:c.borderDrawSize+" "+c.borderDrawStyle+" "+c.borderDrawColor,"background-color":c.backgroundDrawColor})},_setDrawError:function(b){var c=this.options;a(b).css({border:c.borderDrawErrorSize+" "+c.borderDrawErrorStyle+" "+c.borderDrawErrorColor,"background-color":c.backgroundDrawErrorColor})},_saveMapItem:function(b){var c=this.options.mapItemClass+"-"+(this.mapItems.length+1),d={id:c,left:this._parseValue(b.css("left")),top:this._parseValue(b.css("top")),width:this._parseValue(b.css("width")),height:this._parseValue(b.css("height"))};a(b).attr("id",c),this.mapItems.push(d)},_parseValue:function(a){return this.options.mapItemsListPercentage===!0?this._pixelToPercentageHorizontal(a):a.toString().replace("px","")+"px"},_pixelToPercentageHorizontal:function(b){var c=parseInt(b.toString().replace("px",""),10),d=parseInt(a(this.container).width().toString(),10),e=100/d*c;return e+"%"},_colliding:function(){if(this.options.handleCollision){var b=a(".drag"),c=a(".drop"),d=c.overlaps(b,this.options.collisionTolerance);return d.targets.length>0}return!1}}),a.extend(a.ui.imageMapper,{defaults:a.extend({},a.ui.mouse.defaults)})}(jQuery);
//# sourceMappingURL=jquery.image-mapper.min.js.map